CREATE TRIGGER [ACTUALIZA ALICUOTA CORRECTA EN MTOTAX] ON [dbo].[SATAXCOM] 
FOR INSERT, UPDATE 
AS

-- SEP-2007 -- JOSE RAVELO 


DECLARE @CODPROV VARCHAR(10)
DECLARE @NUMEROD VARCHAR(20)
DECLARE @TIPOCOM VARCHAR(1)

BEGIN
SELECT @CODPROV=CODPROV, @NUMEROD=NUMEROD, @TIPOCOM=TIPOCOM FROM INSERTED


UPDATE    SATAXCOM
SET              mtotax = ROUND(Monto * 100 / TGravable, 2)
WHERE     (TGravable > 0) AND SATAXCOM.CODPROV=@CODPROV AND SATAXCOM.NUMEROD=@NUMEROD AND SATAXCOM.TIPOCOM=@TIPOCOM
END

